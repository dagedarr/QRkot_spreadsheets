# Руководство по Alembic
[Alembic](https://alembic.sqlalchemy.org/en/latest/) - это инструмент для управления миграциями баз данных в SQLAlchemy.

## Установка Alembic
1. Установите Alembic через pip:
```
pip install alembic
```

## Инициализация проекта Alembic
1. Создайте директорию для миграций (если её нет):
```
mkdir alembic/versions
```
2. Инициализируйте Alembic в корневой директории проекта:
```
alembic init alembic
```
3. После этого вы найдете следующие файлы и директории в директории `alembic`:
- `alembic.ini` - файл конфигурации Alembic.
- `script.py.mako` - шаблон для создания новых миграций.
- `versions/` - директория, в которой будут храниться миграции.

## Создание новой миграции
1. Используйте команду `revision` для создания новой миграции:
```
alembic revision -m "Описание миграции"
```
Замените `"Описание миграции"` на описание конкретной миграции.

2. В директории `versions` будет создан новый файл миграции с именем вида `XXXXXXX_описание.py`, где `XXXXXXX` - уникальный идентификатор.

3. Внесите необходимые изменения в созданный файл миграции в методах `upgrade()` и `downgrade()`.

## Применение миграций
1. Используйте команду `upgrade` для применения всех доступных миграций:
```
alembic upgrade head
```

2. Для отката к предыдущей версии базы данных используйте команду `downgrade`:
```
alembic downgrade -1
```

Здесь `-1` означает откат на одну миграцию назад.

3. Для отката до начального состояния базы данных используйте:
```
alembic downgrade base
```

## Дополнительные команды
- `alembic current` - показывает текущую версию базы данных.
- `alembic history` - показывает историю миграций.

Дополнительные сведения о командах и конфигурации Alembic можно найти в [официальной документации Alembic](https://alembic.sqlalchemy.org/en/latest/index.html).
